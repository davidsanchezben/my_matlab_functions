[ENABLE DEBUG]
enable_logcontrol=1;	Habilita la escritura de un fichero log
enable_outptbladed=1;	Habilita la salida de datos para Bladed

[DELAY]
fDelayPitch2Bladed=0.01; Retraso en s
fDelayTorque2Bladed=0.01; Retraso en s

[CONSTANTES]
RelacionMultiplicacion=52.6514;

[PITCH]
NumBlades=3;

[PITCHVSPOWER]

x=[0,181,230,297,353,494,660,660,660]; //Power in kW
y=[0,-0.5,-1,-1.5,-2,-2,-2,-2,-2]; //Pitch angle in deg

[PITCHRATEVSGENSPEED0]

x=[1500,1530,1560,1590,1620,1650]; //Generator speed in rpm
y=[-26,-26,-26,-10.5,5,5]; //Pitch rate in deg/s

[PITCHRATEVSGENSPEED1]

x=[1500,1530,1560,1590,1620,1650]; //Generator speed in rpm
y=[-5,-5,15,15,15,15]; //Pitch rate in deg/s

[TORQUEVSGENSPEED]

x=[1500,1530,1620,1650]; //Generator speed in rpm
y=[0,3820,3820,4520]; //Torque in Nm

[POWERVSGENSPEED]

x=[1500,1530,1560,1590,1620,1650]; //Generator speed in rpm
y=[0,660,660,660,660,660]; //Power in kW

[POWERCURVE1]

x=[1500,1530,1650]; // Deslizamiento
y=[0,100,100]; // % de potencia de la máquina

[POWERCURVE2]

x=[1500,1515,1650]; // Deslizamiento
y=[0,100,100]; // % de potencia de la máquina

[SLIP_UP]

x=[0,2,10]; // Desllizamiento
y=[0,100,100]; // % de potencia de la maquina

[SLIP_DOWN]

x=[0,1,10]; // Desllizamiento
y=[0,100,100]; // % de potencia de la maquina

[OPTITIP]

x=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,30]; //Viento en m/s
y=[2.2,1.9,1.4,0.5,-0.4,-1.3,-1.5,-1,-0.1,0.7,1.9,2.9,4.1,4.1,17]; //Optipitch en deg

[DATA1]

TimeStep = 0.02;
CollCorr = 1;
DiffCorr = 2;
MaxPitch0 = 83.02; //deg
MinPitch0 = -5; //deg

[DATA2]

PIDKp = 0.02;
PIDKi = 0.05;
PIDDT = 0.02;
PIDKd = 0;
PIDTd = 0;
PIDKp2 = 0;
PIDKi2 = 0;
PIDWork = [0,0,0,0,0];
PIDNum = [0,0,0];
PIDDen = 0;
PIDNum2 = [0,0];
PIDiNoRateLimits = 0;
PIDiNoLimits = 0;

PID2Kp = 0.0000005;
PID2Ki = PID2Kp/0.06; //No es posible cambiarlo por cfg
PID2DT = 0.02;
PID2Kd = 0;
PID2Td = 0;
PID2Kp2 = 0;
PID2Ki2 = 0;
PID2Work = [0,0,0,0,0];
PID2Num = [0,0,0];
PID2Den = 0;
PID2Num2 = [0,0];
PID2iNoRateLimits = 1;
PID2iNoLimits = 1;

[DATA3]

GSPit1 = 0.017453;
GSPit2 = 0.69813;
GSDiv1 = 1;
GSDiv2 = 9;

[DATA4]

Notch1OK = 1;
Notch1W1 = 2.65;
Notch1D1 = 0;
Notch1W2 = 2.65;
Notch1D2 = 0.2;

[DATA5]

Notch2OK = 1;
Notch2W1 = 0.62;
Notch2D1 = 0;
Notch2W2 = 0.62;
Notch2D2 = 0.2;

[DATA6]

PitSchedAvTimeStep = 0.02;
PitSchedAvT = 5;

[DATA7]

QVSpeedMin = 160.22;
QVSpeedMax = 169.65;
DTTTransferFunctionOK = 1;
DTTTransferFunctioniNumOrder = 2;
DTTTransferFunctioniDenOrder = 2;
DTTTransferFunctionNum0 = 0;
DTTTransferFunctionNum1 = 70.12277;
DTTTransferFunctionNum2 = -70.12277;
DTTTransferFunctionDen0 = 1;
DTTTransferFunctionDen1 = -1.300274;
DTTTransferFunctionDen2 = 0.5599114;

[DATA8]

ITorqueCorrect = 1;
PowerAboveRated = 660000; //W
CurrentControl_Enable = 1;

[DATA9]

QcorrPIKp = 0.001;
QcorrPIKi = 0.002;
QcorrPIDT = 0.02;
QcorrPIKd = 0;
QcorrPITd = 0;
QcorrPIKp2 = 0;
QcorrPIKi2 = 0;
QcorrPIWork = [0,0,0,0,0];
QcorrPINum = [0,0,0];
QcorrPIDen = 0;
QcorrPINum2 = [0,0];
QcorrPIiNoRateLimits = 1;
QcorrPIiNoLimits = 1;
QCorrSpeedRange0 = 160.22;
QCorrSpeedRange1 = 169.65;

[DATA10]

SetSpeed = 1560; //4% de deslizamiento a rpm
MinRate0 = -26; //Rate a deg/s
MaxRate0 = 15; //Rate a deg/s
MinRate = -12; //Rate a deg/s
MaxRate = 12; //Rate a deg/s

[DATA11]

SetSpeed_2pctg = 1530;
SetSpeed_1pctg = 1503;
SyncSpd = 1500;
Pw_nominal = 660000;
AmpsPerNm = 0.137; //0.1341; //Amps/Nm
slip_up_threshold = 2;
slip_low_threshold = 0.2;
GenSpd2Slip= 1530;
GenSpd4Slip= 1560;
PIDTstep=0.02;
pitch_min_threshold = -15;
pitch_max_threshold = 88;

pi_pitch_TN = 2.0;//0.8;// 2.5; // 1/0.4;
pi_pitch_TV = 0.01;//2.3; //2.5;// 0.4; //0.83;// 0.02;
pi_pitch_y_offset = 0;
pi_pitch_y_max = 1.483529864; //85*PI/180;

pi_gen_KP = 0.0000005; //0.05;// 0.01;
pi_gen_TN = 0.06; //0.83;// 0.02;
pi_gen_y_offset = 0;
pi_gen_y_min = 0;
pi_gen_y_max = 4320; //NO TIENE SENTIDO SATURAR EN 660kW SI VAS A REGULAR EN ESTE PUNTO

[SPEEDNONLINEARITY]

SlipPctBegNonlinGainLow = 0.035; // genspd_err_low = 35 o/oo
SlipPctBegNonlinGainHigh = 0.07; // genspd_err_high = 70 o/oo
AlfaSpeedNonlinearHigh = 8; // high_slope
AlfaSpeedNonlinearLow = 20; // low_slope
SpdNonLin = 0.1; //0.04

[PITCHNONLINEARITY]

Pitch_NL_A = 14;
Pitch_NL_B = 5.04;
THETA_V = 1;

[ATDinterpl]

x = [-7,4.2,7.7769,17.7239,22.7598,40,90];
y = [1,1,1,0.8582,0.7732,0,0];

[DTD]
DTD_enable = 1;
Gain_DTD = 100               // [Nms/rad] - Ganancia lazo drive-train damping
B_DTD = 0.08036; // [-] - Parámetro B filtro pasa banda discretizado
C_DTD = -0.08036; // [-] - Parámetro C filtro pasa banda discretizado
D_DTD = 1;                 // [-] - Parámetro D filtro pasa banda discretizado
E_DTD = -1.886; // [-] - Parámetro E filtro pasa banda discretizado
F_DTD = 0.9158; // [-] - Parámetro F filtro pasa banda discretizado
UPPER_LIMIT_DTD = 100               // [Nm] - Valor salida máximo drive-train damping
LOWER_LIMIT_DTD = -100       // [Nm] - Valor salida mínimo drive-train damping

[ATD]

ATD_enable = 0;
Gain_ATD = 0.5; // [rad*s/m] - Ganancia lazo tower damping
LOWER_LIMIT_ATD = -0.5; // [deg] - Límite superior salida tower damping
UPPER_LIMIT_ATD = 0.5; // [deg] - Límite inferior salida tower damping
bandpassFilterSt_1_b = 0.03479;
bandpassFilterSt_1_c = -0.03479;
bandpassFilterSt_1_d = 1;
bandpassFilterSt_1_e = -1.958;
bandpassFilterSt_1_f = 0.9636;
bandpassFilterSt_1_enable = 0;

[FILTERS]

tNotchFilter1_pitch_enable = 1;
tNotchFilter1_pitch_a = 0.811;   // 0.8729;// 0.1689;// 0.2570;
tNotchFilter1_pitch_b = -1.544;  // -1.662;//-0.3214;//-0.1862;
tNotchFilter1_pitch_c = 0.811;   // 0.8729;//0.1689;//0.2570;
tNotchFilter1_pitch_d = 1;        //1;//1;
tNotchFilter1_pitch_e = -1.544;   // -1.662;//-0.9862;//-1.3108;
tNotchFilter1_pitch_f = 0.622;    // 0.7458;//0.002689;//0.5420;

tNotchFilter3P_pitch_enable = 1;
tNotchFilter3P_pitch_a = 0.9929;   // 0.881;// 0.559;
tNotchFilter3P_pitch_b = -1.954;   // -1.734;//-0.685;
tNotchFilter3P_pitch_c = 0.9929;   // 0.881;//0.559;
tNotchFilter3P_pitch_d = 1;        //1.000;
tNotchFilter3P_pitch_e = -1.954;   // -1.734;//-0.685;
tNotchFilter3P_pitch_f = 0.9859;   // 0.7621;//0.117;

tNotchFilterFA_pitch_enable = 1;
tNotchFilterFA_pitch_a = 0.9856
tNotchFilterFA_pitch_b = 1.7199;
tNotchFilterFA_pitch_c = 0.9856;
tNotchFilterFA_pitch_d = 1;
tNotchFilterFA_pitch_e = 1.7199;
tNotchFilterFA_pitch_f = 0.9711;

tNotchFilter1_power_enable = 1;
tNotchFilter1_power_a = 0.811;// 0.8729;// 0.1689;// 0.2570;
tNotchFilter1_power_b = -1.544;// -1.662;//-0.3214;//-0.1862;
tNotchFilter1_power_c = 0.811;// 0.8729;//0.1689;//0.2570;
tNotchFilter1_power_d = 1;//1;//1;
tNotchFilter1_power_e = -1.544;// -1.662;//-0.9862;//-1.3108;
tNotchFilter1_power_f = 0.622;// 0.7458;//0.002689;//0.5420;

tNotchFilter3P_power_enable = 1;
tNotchFilter3P_power_a = 0.881;// 0.559;
tNotchFilter3P_power_b = -1.734;//-0.685;
tNotchFilter3P_power_c = 0.881;//0.559;
tNotchFilter3P_power_d = 1;//1.000;
tNotchFilter3P_power_e = -1.734;//-0.685;
tNotchFilter3P_power_f = 0.7621;//0.117;

tNotchFilter1B_power_enable = 1;
tNotchFilter1B_power_a = 0.811;// 0.8729;// 0.1689;// 0.2570;
tNotchFilter1B_power_b = -1.544;// -1.662;//-0.3214;//-0.1862;
tNotchFilter1B_power_c = 0.811;// 0.8729;//0.1689;//0.2570;
tNotchFilter1B_power_d = 1;//1;//1;
tNotchFilter1B_power_e = -1.544;// -1.662;//-0.9862;//-1.3108;
tNotchFilter1B_power_f = 0.622;// 0.7458;//0.002689;//0.5420;

tNotchFilterFA_power_enable = 1;
tNotchFilterFA_power_a = 0.9856
tNotchFilterFA_power_b = 1.7199;
tNotchFilterFA_power_c = 0.9856;
tNotchFilterFA_power_d = 1;
tNotchFilterFA_power_e = 1.7199;
tNotchFilterFA_power_f = 0.9711;